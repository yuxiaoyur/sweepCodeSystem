webpackJsonp([18,90],{"+OCx":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Ndwf"),r={components:{ElInput:a("4lon").a,ElFormItem:n.a},computed:{isView:function(){return"查看"===this.whichType(this.dataForm.type)}},data:function(){return{visible:!1,dataForm:{id:"",topicCount:"",departmentCount:"",diskUsageCount:"",recordCount:"",fileCount:"",type:""},rules:{topicCount:[{required:!0,message:"请输入主题总条数",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}],departmentCount:[{required:!0,message:"请输入部门总数",trigger:"blur"},{min:2,max:66,message:"长度在 2 到 66 个字符",trigger:"blur"}],diskUsageCount:[{required:!0,message:"请输入磁盘占用空间",trigger:"blur"},{min:2,max:66,message:"长度在 2 到 66 个字符",trigger:"blur"}],recordCount:[{required:!0,message:"请输入记录总条数",trigger:"blur"},{min:2,max:66,message:"长度在 2 到 66 个字符",trigger:"blur"}],fileCount:[{required:!0,message:"请输入文件总数",trigger:"blur"},{min:2,max:66,message:"长度在 2 到 66 个字符",trigger:"blur"}]}}},methods:{whichType:function(t){return"add"===t?"新增":"update"===t?"修改":"view"===t?"查看":void 0},initializing:function(t,e){var a=this;this.visible=!0,this.$nextTick(function(){if(a.$refs.dataForm.resetFields(),"number"==typeof t)a.$http({url:a.$http.adornUrl("/data_govern_platform_ledger/record"),method:"get",params:a.$http.adornParams({id:t})}).then(function(n){var r=n.data;r&&r.successful?(a.dataForm=r.data,a.dataForm.type=e,a.dataForm.id=t):(console.log("ERROR",r),a.$message.error("操作失败"))});else for(var n in a.dataForm)a.dataForm[n]="";a.dataForm.type=e})},dataFormSubmit:function(){var t=this;this.$refs.dataForm.validate(function(e){if(!e)return!1;t.$http({url:t.$http.adornUrl("/data_govern_platform_ledger/record"),method:"add"===t.dataForm.type?"post":"put",data:t.$http.adornData({id:t.dataForm.id||void 0,topicCount:t.dataForm.topicCount,departmentCount:t.dataForm.departmentCount,diskUsageCount:t.dataForm.diskUsageCount,recordCount:t.dataForm.recordCount,fileCount:t.dataForm.fileCount,deleteFlag:"1"})}).then(function(e){var a=e.data;a.successful?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.visible=!1,t.$emit("refreshDataList")}}):(console.log("ERROR",a),t.$message.error("操作失败"))})})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.whichType(t.dataForm.type),"modal-append-to-body":!1,"close-on-click-modal":!1,visible:t.visible,width:"60%"},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.dataForm,"label-width":"20%",rules:t.rules}},[a("el-form-item",{attrs:{label:"主题总条数",prop:"topicCount"}},[a("el-input",{attrs:{disabled:t.isView},model:{value:t.dataForm.topicCount,callback:function(e){t.$set(t.dataForm,"topicCount",e)},expression:"dataForm.topicCount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"部门总数",prop:"departmentCount"}},[a("el-input",{attrs:{disabled:t.isView},model:{value:t.dataForm.departmentCount,callback:function(e){t.$set(t.dataForm,"departmentCount",e)},expression:"dataForm.departmentCount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"磁盘占用空间",prop:"diskUsageCount"}},[a("el-input",{attrs:{disabled:t.isView},model:{value:t.dataForm.diskUsageCount,callback:function(e){t.$set(t.dataForm,"diskUsageCount",e)},expression:"dataForm.diskUsageCount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"记录总条数",prop:"recordCount"}},[a("el-input",{attrs:{disabled:t.isView},model:{value:t.dataForm.recordCount,callback:function(e){t.$set(t.dataForm,"recordCount",e)},expression:"dataForm.recordCount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"文件总数",prop:"fileCount"}},[a("el-input",{attrs:{disabled:t.isView},model:{value:t.dataForm.fileCount,callback:function(e){t.$set(t.dataForm,"fileCount",e)},expression:"dataForm.fileCount"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:t.isView},on:{click:function(e){t.dataFormSubmit()}}},[t._v("保存")])],1)],1)},staticRenderFns:[]},i=a("46Yf")(r,o,!1,null,null,null);e.default=i.exports},HGZd:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={data:function(){return{dataForm:{id:"",topicCount:"",departmentCount:"",diskUsageCount:"",recordCount:"",fileCount:""},dataList:[],pageIndex:1,pageSize:10,totalPage:0,dataListLoading:!1,dataListSelections:[],permission:[],permissionVisible:{add:!1,update:!1,delete:!1},addOrUpdateVisible:!1}},computed:{},components:{addOrUpdate:a("+OCx").default},activated:function(){this.getDataList()},mounted:function(){this.getPermission()},methods:{getPermission:function(){var t=this;this.$http({url:this.$http.adornUrl("/sys/menuPermission"),method:"get",params:this.$http.adornParams({menuId:this.$route.meta.menuId})}).then(function(e){var a=e.data;t.permission=a;for(var n=0;n<a.length;n++)switch(a[n].split(":")[1]){case"add":t.permissionVisible.add=!0;break;case"update":t.permissionVisible.update=!0;break;case"delete":t.permissionVisible.delete=!0}})},hasPermission:function(t){switch(t){case"add":return this.permissionVisible.add;case"update":return this.permissionVisible.update;case"delete":return this.permissionVisible.delete;default:return!1}},getDataList:function(){var t=this;this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/data_govern_platform_ledger/records"),method:"get",params:this.$http.adornParams({page:this.pageIndex,limit:this.pageSize,topicCount:this.dataForm.topicCount,departmentCount:this.dataForm.departmentCount,diskUsageCount:this.dataForm.diskUsageCount,recordCount:this.dataForm.recordCount,fileCount:this.dataForm.fileCount})}).then(function(e){var a=e.data;a&&a.successful?(t.dataList=a.data.list,t.totalPage=a.data.total,t.dataListLoading=!1):(console.log("ERROR",a),t.$message.error("操作失败"))})},sizeChangeHandle:function(t){this.pageSize=t,this.pageIndex=1,this.getDataList()},currentChangeHandle:function(t){this.pageIndex=t,this.getDataList()},selectionChangeHandle:function(t){this.dataListSelections=t},addOrUpdateHandle:function(t,e){var a=this;this.addOrUpdateVisible=!0,this.$nextTick(function(){a.$refs.addOrUpdate.initializing(t,e)})},deleteHandle:function(t){var e=this,a=t?[t]:this.dataListSelections.map(function(t){return t.id});null!=a&&""!==a?this.$confirm("确定进行["+(a?"删除":"批量删除")+"]操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http({url:e.$http.adornUrl("/data_govern_platform_ledger/record"),method:"delete",params:e.$http.adornParams({id:a.join(",")},!1)}).then(function(t){var a=t.data;a&&a.successful?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.getDataList()}}):e.$message.error(a.message)})}).catch(function(){}):this.$message.error("请选择要删除的数据")}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mod-mssq-rcfx"},[a("el-form",{attrs:{inline:!0,model:t.dataForm},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.getDataList()}}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"主题总条数",clearable:""},model:{value:t.dataForm.topicCount,callback:function(e){t.$set(t.dataForm,"topicCount",e)},expression:"dataForm.topicCount"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"部门总数",clearable:""},model:{value:t.dataForm.departmentCount,callback:function(e){t.$set(t.dataForm,"departmentCount",e)},expression:"dataForm.departmentCount"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"磁盘占用空间",clearable:""},model:{value:t.dataForm.diskUsageCount,callback:function(e){t.$set(t.dataForm,"diskUsageCount",e)},expression:"dataForm.diskUsageCount"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"记录总条数",clearable:""},model:{value:t.dataForm.recordCount,callback:function(e){t.$set(t.dataForm,"recordCount",e)},expression:"dataForm.recordCount"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"文件总数",clearable:""},model:{value:t.dataForm.fileCount,callback:function(e){t.$set(t.dataForm,"fileCount",e)},expression:"dataForm.fileCount"}})],1)],1),t._v(" "),a("el-form-item",[a("el-button",{on:{click:function(e){t.getDataList()}}},[t._v("查询")])],1),t._v(" "),a("el-form-item",[t.hasPermission("add")?a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addOrUpdateHandle(t.dataForm.id,"add")}}},[t._v("新增\n        ")]):t._e()],1)],1)],1),t._v(" "),a("br"),a("br"),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataListLoading,expression:"dataListLoading"}],staticStyle:{},attrs:{data:t.dataList,border:""},on:{"selection-change":t.selectionChangeHandle}},[a("el-table-column",{attrs:{prop:"id","header-align":"center",align:"center",width:"80",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"topicCount","header-align":"center",align:"center",sortable:"",label:"主题总条数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"departmentCount","header-align":"center",align:"center",sortable:"",label:"部门总数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"diskUsageCount","header-align":"center",align:"center",sortable:"",label:"磁盘占用空间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"recordCount","header-align":"center",align:"center",sortable:"",label:"记录总条数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fileCount","header-align":"center",align:"center",sortable:"",label:"文件总数"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.hasPermission("update")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.addOrUpdateHandle(e.row.id,"view")}}},[t._v("查看\n        ")]):t._e(),t._v(" "),t.hasPermission("update")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.addOrUpdateHandle(e.row.id,"update")}}},[t._v("修改\n        ")]):t._e(),t._v(" "),t.hasPermission("delete")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.deleteHandle(e.row.id)}}},[t._v("删除\n        ")]):t._e()]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.pageIndex,"page-sizes":[10,20,50,100],"page-size":t.pageSize,total:t.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.sizeChangeHandle,"current-change":t.currentChangeHandle}}),t._v(" "),t.addOrUpdateVisible?a("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:t.getDataList}}):t._e()],1)},staticRenderFns:[]};var o=a("46Yf")(n,r,!1,function(t){a("N6kj")},null,null);e.default=o.exports},N6kj:function(t,e,a){var n=a("uigO");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("FIqI")("66feb78a",n,!0,{})},uigO:function(t,e,a){(t.exports=a("UTlt")(!1)).push([t.i,"\n.fixElDatePicker {\n  -ms-flex-line-pack: center;\n      align-content: center;\n}\n.demo-table-expand {\n  font-size: 0;\n}\n.demo-table-expand label {\n  width: 120px;\n  color: #99a9bf;\n}\n.demo-table-expand .el-form-item {\n  margin-right: 0;\n  margin-bottom: 0;\n  width: 50%;\n}\n",""])}});