webpackJsonp([90],{"+OCx":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Ndwf"),o={components:{ElInput:a("4lon").a,ElFormItem:r.a},computed:{isView:function(){return"查看"===this.whichType(this.dataForm.type)}},data:function(){return{visible:!1,dataForm:{id:"",topicCount:"",departmentCount:"",diskUsageCount:"",recordCount:"",fileCount:"",type:""},rules:{topicCount:[{required:!0,message:"请输入主题总条数",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}],departmentCount:[{required:!0,message:"请输入部门总数",trigger:"blur"},{min:2,max:66,message:"长度在 2 到 66 个字符",trigger:"blur"}],diskUsageCount:[{required:!0,message:"请输入磁盘占用空间",trigger:"blur"},{min:2,max:66,message:"长度在 2 到 66 个字符",trigger:"blur"}],recordCount:[{required:!0,message:"请输入记录总条数",trigger:"blur"},{min:2,max:66,message:"长度在 2 到 66 个字符",trigger:"blur"}],fileCount:[{required:!0,message:"请输入文件总数",trigger:"blur"},{min:2,max:66,message:"长度在 2 到 66 个字符",trigger:"blur"}]}}},methods:{whichType:function(t){return"add"===t?"新增":"update"===t?"修改":"view"===t?"查看":void 0},initializing:function(t,e){var a=this;this.visible=!0,this.$nextTick(function(){if(a.$refs.dataForm.resetFields(),"number"==typeof t)a.$http({url:a.$http.adornUrl("/data_govern_platform_ledger/record"),method:"get",params:a.$http.adornParams({id:t})}).then(function(r){var o=r.data;o&&o.successful?(a.dataForm=o.data,a.dataForm.type=e,a.dataForm.id=t):(console.log("ERROR",o),a.$message.error("操作失败"))});else for(var r in a.dataForm)a.dataForm[r]="";a.dataForm.type=e})},dataFormSubmit:function(){var t=this;this.$refs.dataForm.validate(function(e){if(!e)return!1;t.$http({url:t.$http.adornUrl("/data_govern_platform_ledger/record"),method:"add"===t.dataForm.type?"post":"put",data:t.$http.adornData({id:t.dataForm.id||void 0,topicCount:t.dataForm.topicCount,departmentCount:t.dataForm.departmentCount,diskUsageCount:t.dataForm.diskUsageCount,recordCount:t.dataForm.recordCount,fileCount:t.dataForm.fileCount,deleteFlag:"1"})}).then(function(e){var a=e.data;a.successful?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.visible=!1,t.$emit("refreshDataList")}}):(console.log("ERROR",a),t.$message.error("操作失败"))})})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.whichType(t.dataForm.type),"modal-append-to-body":!1,"close-on-click-modal":!1,visible:t.visible,width:"60%"},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.dataForm,"label-width":"20%",rules:t.rules}},[a("el-form-item",{attrs:{label:"主题总条数",prop:"topicCount"}},[a("el-input",{attrs:{disabled:t.isView},model:{value:t.dataForm.topicCount,callback:function(e){t.$set(t.dataForm,"topicCount",e)},expression:"dataForm.topicCount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"部门总数",prop:"departmentCount"}},[a("el-input",{attrs:{disabled:t.isView},model:{value:t.dataForm.departmentCount,callback:function(e){t.$set(t.dataForm,"departmentCount",e)},expression:"dataForm.departmentCount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"磁盘占用空间",prop:"diskUsageCount"}},[a("el-input",{attrs:{disabled:t.isView},model:{value:t.dataForm.diskUsageCount,callback:function(e){t.$set(t.dataForm,"diskUsageCount",e)},expression:"dataForm.diskUsageCount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"记录总条数",prop:"recordCount"}},[a("el-input",{attrs:{disabled:t.isView},model:{value:t.dataForm.recordCount,callback:function(e){t.$set(t.dataForm,"recordCount",e)},expression:"dataForm.recordCount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"文件总数",prop:"fileCount"}},[a("el-input",{attrs:{disabled:t.isView},model:{value:t.dataForm.fileCount,callback:function(e){t.$set(t.dataForm,"fileCount",e)},expression:"dataForm.fileCount"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:t.isView},on:{click:function(e){t.dataFormSubmit()}}},[t._v("保存")])],1)],1)},staticRenderFns:[]},n=a("46Yf")(o,i,!1,null,null,null);e.default=n.exports}});