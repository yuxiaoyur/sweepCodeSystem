webpackJsonp([44,77],{"9k0C":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("E4LH"),l={data:function(){return{visible:!1,dataForm:{id:"",linkurl:"",linkcode:"",yipage:"",eipage:"",sipage:"",sysname:"",managername:"",width:"",height:"",paramtype:"0",linkstatus:"0",isvalidate:"0",waytype:"",type:"",codereadonly:!1,waytypeRadio:!1},dataRule:{linkcode:[{required:!0,message:"标识码不能为空",trigger:"blur"}],linkurl:[{required:!0,message:"链接地址不能为空",trigger:"blur"},{validator:function(e,a,t){Object(r.f)(a)?t():t(new Error("必须以http,https开头,且需符合URL规范,检查格式是否正确"))},trigger:"blur"}],yjpage:[{required:!0,message:"页面名称不能为空",trigger:"blur"}]}}},created:function(){},methods:{init:function(e,a){var t=this;this.visible=!0,this.$nextTick(function(){t.$refs.dataForm.resetFields(),e.length>0&&t.$http({url:t.$http.adornUrl("/link/findidtolink"),method:"get",params:t.$http.adornParams({id:e})}).then(function(e){var a=e.data;a&&a.successful?t.dataForm=a.data:(console.log("ERROR",a),t.$message.error("操作失败")),t.codereadonly=!0,t.isvalidateChange(a.data.isvalidate)}),t.dataForm.type=a,t.codereadonly=!1,t.isvalidateChange(t.dataForm.isvalidate)})},isvalidateChange:function(e){"0"==e?(this.dataForm.waytype="",this.waytypeRadio=!0):(this.dataForm.waytype="0",this.waytypeRadio=!1)},validateSame:function(){var e=this;"add"===this.dataForm.type?this.$http({url:this.$http.adornUrl("/link/isSamecCode"),method:"get",params:this.$http.adornParams({linkcode:this.dataForm.linkcode})}).then(function(a){a.data.successful?e.messageHint(e.dataForm.linkcode):e.dataFormSubmit()}):this.dataFormSubmit()},messageHint:function(e){this.$message({dangerouslyUseHTMLString:!0,message:'<strong style="color: #ff2222">标识码'+e+"已存在!</strong>"})},dataFormSubmit:function(){var e=this;this.$refs.dataForm.validate(function(a){a&&e.$http({url:e.$http.adornUrl("/link/"+("add"===e.dataForm.type?"addLink":"updateLink")),method:"post",data:e.$http.adornData({id:e.dataForm.id||void 0,linkurl:e.dataForm.linkurl,linkcode:e.dataForm.linkcode,yjpage:e.dataForm.yjpage,ejpage:e.dataForm.ejpage,sjpage:e.dataForm.sjpage,sysname:e.dataForm.sysname,managername:e.dataForm.managername,width:e.dataForm.width,height:e.dataForm.height,paramtype:e.dataForm.paramtype,linkstatus:e.dataForm.linkstatus,isvalidate:e.dataForm.isvalidate,waytype:e.dataForm.waytype})}).then(function(a){var t=a.data;t.successful?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.visible=!1,e.$emit("refreshDataList")}}):(console.log("ERROR",t),e.$message.error("操作失败"))})})}}},i={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-dialog",{attrs:{title:"add"==e.dataForm.type?"新增":"修改","modal-append-to-body":!1,"close-on-click-modal":!1,visible:e.visible,width:"50%"},on:{"update:visible":function(a){e.visible=a}}},[t("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"15%"},nativeOn:{keyup:function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key))return null;e.validateSame()}}},[t("el-form-item",{attrs:{label:"链接地址",prop:"linkurl"}},[t("el-input",{attrs:{placeholder:"请输入链接地址..."},model:{value:e.dataForm.linkurl,callback:function(a){e.$set(e.dataForm,"linkurl",a)},expression:"dataForm.linkurl"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"标识码",prop:"linkcode"}},[t("el-input",{attrs:{disabled:e.codereadonly,placeholder:"链接标识码"},model:{value:e.dataForm.linkcode,callback:function(a){e.$set(e.dataForm,"linkcode",a)},expression:"dataForm.linkcode"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"一级页面",prop:"yjpage"}},[t("el-input",{attrs:{placeholder:"一级页面名称"},model:{value:e.dataForm.yjpage,callback:function(a){e.$set(e.dataForm,"yjpage",a)},expression:"dataForm.yjpage"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"二级页面",prop:"ejpage"}},[t("el-input",{attrs:{placeholder:"二级页面名称"},model:{value:e.dataForm.ejpage,callback:function(a){e.$set(e.dataForm,"ejpage",a)},expression:"dataForm.ejpage"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"三级页面",prop:"sjpage"}},[t("el-input",{attrs:{placeholder:"三级页面名称"},model:{value:e.dataForm.sjpage,callback:function(a){e.$set(e.dataForm,"sjpage",a)},expression:"dataForm.sjpage"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"所属系统",prop:"sysname"}},[t("el-input",{attrs:{placeholder:"系统名称"},model:{value:e.dataForm.sysname,callback:function(a){e.$set(e.dataForm,"sysname",a)},expression:"dataForm.sysname"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"所属部门",prop:"managername"}},[t("el-input",{attrs:{placeholder:"部门名称"},model:{value:e.dataForm.managername,callback:function(a){e.$set(e.dataForm,"managername",a)},expression:"dataForm.managername"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"窗口宽",prop:"width"}},[t("el-input",{attrs:{placeholder:"px"},model:{value:e.dataForm.width,callback:function(a){e.$set(e.dataForm,"width",a)},expression:"dataForm.width"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"窗口高",prop:"height"}},[t("el-input",{attrs:{placeholder:"px"},model:{value:e.dataForm.height,callback:function(a){e.$set(e.dataForm,"height",a)},expression:"dataForm.height"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"参数动静态类型",size:"mini",prop:"status"}},[t("el-radio-group",{model:{value:e.dataForm.paramtype,callback:function(a){e.$set(e.dataForm,"paramtype",a)},expression:"dataForm.paramtype"}},[t("el-radio",{attrs:{label:"0"}},[e._v("静态值")]),e._v(" "),t("el-radio",{attrs:{label:"1"}},[e._v("动态值")])],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"是否验证",size:"mini",prop:"status"}},[t("el-radio-group",{on:{change:function(a){e.isvalidateChange(e.dataForm.isvalidate)}},model:{value:e.dataForm.isvalidate,callback:function(a){e.$set(e.dataForm,"isvalidate",a)},expression:"dataForm.isvalidate"}},[t("el-radio",{attrs:{label:"0"}},[e._v("否")]),e._v(" "),t("el-radio",{attrs:{label:"1"}},[e._v("是")])],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"拼接方式",size:"mini",prop:"status"}},[t("el-radio-group",{attrs:{disabled:e.waytypeRadio},model:{value:e.dataForm.waytype,callback:function(a){e.$set(e.dataForm,"waytype",a)},expression:"dataForm.waytype"}},[t("el-radio",{attrs:{label:"0"}},[e._v("url拼接")]),e._v(" "),t("el-radio",{attrs:{label:"1"}},[e._v("header隐藏")])],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"链接状态",size:"mini",prop:"status"}},[t("el-radio-group",{model:{value:e.dataForm.linkstatus,callback:function(a){e.$set(e.dataForm,"linkstatus",a)},expression:"dataForm.linkstatus"}},[t("el-radio",{attrs:{label:"0"}},[e._v("正常")]),e._v(" "),t("el-radio",{attrs:{label:"1"}},[e._v("异常")])],1)],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.visible=!1}}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.validateSame()}}},[e._v("保存")])],1)],1)},staticRenderFns:[]},n=t("46Yf")(l,i,!1,null,null,null);a.default=n.exports},"gTG+":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={data:function(){return{dataForm:{id:"",linkurl:"",linkcode:"",usepage:"",sysname:"",managername:"",width:"",height:"",createtime:"",updatetime:"",paramtype:"",linkstatus:""},dataList:[],pageIndex:1,pageSize:10,totalPage:0,dataListLoading:!1,dataListSelections:[],permission:[],permissionVisible:{add:!1,update:!1,delete:!1},addOrUpdateVisible:!1}},components:{addOrUpdate:t("9k0C").default},activated:function(){this.getDataList()},mounted:function(){this.getPermission()},methods:{getPermission:function(){var e=this;this.$http({url:this.$http.adornUrl("/sys/menuPermission"),method:"get",params:this.$http.adornParams({menuId:this.$route.meta.menuId})}).then(function(a){var t=a.data;e.permission=t;for(var r=0;r<t.length;r++)switch(t[r].split(":")[1]){case"add":e.permissionVisible.add=!0;break;case"update":e.permissionVisible.update=!0;break;case"delete":e.permissionVisible.delete=!0}})},hasPermission:function(e){switch(e){case"add":return this.permissionVisible.add;case"update":return this.permissionVisible.update;case"delete":return this.permissionVisible.delete;default:return!1}},getDataList:function(){var e=this;this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/link/findlinkdetails"),method:"get",params:this.$http.adornParams({page:this.pageIndex,limit:this.pageSize,linkcode:this.dataForm.linkcode,yjpage:this.dataForm.yjpage,ejpage:this.dataForm.ejpage,sjpage:this.dataForm.sjpage,managername:this.dataForm.managername,sysname:this.dataForm.sysname})}).then(function(a){var t=a.data;t&&t.successful?(e.dataList=t.data.list,e.totalPage=t.data.total,e.dataListLoading=!1):(console.log("ERROR",t),e.$message.error("操作失败"))})},sizeChangeHandle:function(e){this.pageSize=e,this.pageIndex=1,this.getDataList()},currentChangeHandle:function(e){this.pageIndex=e,this.getDataList()},selectionChangeHandle:function(e){this.dataListSelections=e},addOrUpdateHandle:function(e,a,t){var r=this;this.addOrUpdateVisible=!0,this.$nextTick(function(){r.$refs.addOrUpdate.init(e,a,t)})},deleteHandle:function(e){var a=this,t=e?[e]:this.dataListSelections.map(function(e){return e.id});null!=t&&""!=t?this.$confirm("确定进行["+(t?"删除":"批量删除")+"]操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http({url:a.$http.adornUrl("/link/removeLink"),method:"post",params:a.$http.adornParams({id:t.join(",")},!1)}).then(function(e){var t=e.data;t&&t.successful?a.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){a.getDataList()}}):a.$message.error(t.message)})}).catch(function(){}):this.$message.error("请选择要删除的数据")}}},l={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"mod-mssq-rcfx"},[t("el-form",{attrs:{inline:!0,model:e.dataForm},nativeOn:{keyup:function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key))return null;e.getDataList()}}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"标识码",clearable:""},model:{value:e.dataForm.linkcode,callback:function(a){e.$set(e.dataForm,"linkcode",a)},expression:"dataForm.linkcode"}})],1),e._v(" "),t("el-form-item",[t("el-input",{attrs:{placeholder:"一级页面名称关键词",clearable:""},model:{value:e.dataForm.yjpage,callback:function(a){e.$set(e.dataForm,"yjpage",a)},expression:"dataForm.yjpage"}})],1),e._v(" "),t("el-form-item",[t("el-input",{attrs:{placeholder:"二级页面名称关键词",clearable:""},model:{value:e.dataForm.ejpage,callback:function(a){e.$set(e.dataForm,"ejpage",a)},expression:"dataForm.ejpage"}})],1),e._v(" "),t("el-form-item",[t("el-input",{attrs:{placeholder:"三级页面名称关键词",clearable:""},model:{value:e.dataForm.sjpage,callback:function(a){e.$set(e.dataForm,"sjpage",a)},expression:"dataForm.sjpage"}})],1),e._v(" "),t("el-form-item",[t("el-input",{attrs:{placeholder:"所属系统名称关键词",clearable:""},model:{value:e.dataForm.sysname,callback:function(a){e.$set(e.dataForm,"sysname",a)},expression:"dataForm.sysname"}})],1),e._v(" "),t("el-form-item",[t("el-input",{attrs:{placeholder:"所属部门名称关键词",clearable:""},model:{value:e.dataForm.managername,callback:function(a){e.$set(e.dataForm,"managername",a)},expression:"dataForm.managername"}})],1),e._v(" "),t("el-form-item",[t("el-button",{on:{click:function(a){e.getDataList()}}},[e._v("查询")])],1),e._v(" "),t("el-form-item",[e.hasPermission("add")?t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.addOrUpdateHandle(e.dataForm.id,"add")}}},[e._v("新增\n      ")]):e._e(),e._v(" "),e.hasPermission("delete")?t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.deleteHandle()}}},[e._v("批量删除")]):e._e()],1)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:e.dataList,border:""},on:{"selection-change":e.selectionChangeHandle}},[t("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"40"}}),e._v(" "),t("el-table-column",{attrs:{prop:"createtime","header-align":"center",align:"center",label:"创建时间"}}),e._v(" "),t("el-table-column",{attrs:{prop:"linkcode","header-align":"center",align:"center",label:"标识码"}}),e._v(" "),t("el-table-column",{attrs:{prop:"linkurl","header-align":"center",align:"center",label:"链接地址"}}),e._v(" "),t("el-table-column",{attrs:{prop:"usepage","header-align":"center",align:"center",label:"链接使用处"}}),e._v(" "),t("el-table-column",{attrs:{prop:"sysname","header-align":"center",align:"center",label:"系统名称"}}),e._v(" "),t("el-table-column",{attrs:{prop:"managername","header-align":"center",align:"center",label:"部门名称"}}),e._v(" "),t("el-table-column",{attrs:{prop:"paramtype","header-align":"center",align:"center",width:"100",label:"参数静动态类型"}}),e._v(" "),t("el-table-column",{attrs:{prop:"isvalidate","header-align":"center",align:"center",width:"100",label:"是否验证"}}),e._v(" "),t("el-table-column",{attrs:{prop:"waytype","header-align":"center",align:"center",width:"100",label:"验证方式"}}),e._v(" "),t("el-table-column",{attrs:{prop:"linkstatus","header-align":"center",align:"center",width:"80",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(a){return["0"==a.row.linkstatus?t("el-tag",{attrs:{size:"small"}},[e._v("正常")]):t("el-tag",{attrs:{size:"small",type:"danger"}},[e._v("异常")])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"updatetime","header-align":"center",align:"center",label:"更新时间"}}),e._v(" "),t("el-table-column",{attrs:{"header-align":"center",align:"center",width:"120",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.hasPermission("update")?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.addOrUpdateHandle(a.row.id,"update")}}},[e._v("修改\n        ")]):e._e(),e._v(" "),e.hasPermission("delete")?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.deleteHandle(a.row.id)}}},[e._v("删除\n        ")]):e._e()]}}])})],1),e._v(" "),t("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,20,50,100],"page-size":e.pageSize,total:e.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}}),e._v(" "),e.addOrUpdateVisible?t("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:e.getDataList}}):e._e()],1)},staticRenderFns:[]},i=t("46Yf")(r,l,!1,null,null,null);a.default=i.exports}});